% !TeX root = ../thuthesis-example.tex

% 中英文摘要和关键字

\begin{abstract}
  % 关键词用“英文逗号”分隔，输出时会自动处理为正确的分隔符
  近年来，工业物联网的发展迅猛，产生了越来越多的时序数据，如何高效地写入和存储这些时序数据成为了一个重要的问题。Apache IoTDB 是一款面向物联网场景的时序数据库，其目前支持使用 SQL 写入、按 Tablet 写入（\emph{InsertTablets}）、按 Records 写入（\emph{InsertRecords}）。其中 \emph{InsertRecords} 接口具有较好的易用性和写入性能，且对不同场景的适用性最广泛，被大量用户所使用。
  
  面对工业物联网场景日益增大的写入负载，优化 \emph{InsertRecords} 写入性能不仅可以提高 IoTDB 的上限以满足更高负载场景的写入需求，也可以在相同写入场景下占用更少的资源，帮助用户节省成本，具有重要的现实意义。本工作针对现有 IoTDB 的 \emph{InsertRecords} 写入机制进行了分析，并从客户端、RPC 层、存储引擎三个方面分别进行了优化，提升了 \emph{InsertRecords} 写入机制的性能。本工作的主要贡献如下：
  \begin{enumerate}
    \item 完整分析了现有 IoTDB \emph{InsertRecords} 写入机制的执行流程，并在压力测试场景下使用性能分析工具量化了各个环节的性能开销，确定了已有 \emph{InsertRecords} 写入机制的瓶颈所在，包括网络带宽瓶颈、存储引擎未批量化执行、存储引擎磁盘瓶颈等，然后从设计和实现的角度分析了导致瓶颈出现的原因。
    \item 从客户端、RPC 层、存储引擎三个方面优化了 IoTDB 的 \emph{InsertRecords} 写入机制，包括客户端请求格式转换、数据预处理、写入请求列式序列化、存储引擎批量化执行、写前日志压缩等，解决了发现的 \emph{InsertRecords} 写入机制的瓶颈，从而提高了写入性能。
    \item 使用压力测试工具，对各个优化措施所带来的性能提升进行了测试，验证了优化措施的有效性。为了贴近用户的真实场景，本工作设计并实现了一套用户负载采样以及模拟运行程序，通过对若干用户的真实负载进行采样，生成了一系列模拟负载，然后使用这些模拟负载对优化前后的 IoTDB 的 \emph{InsertRecords} 写入机制进行了测试。
  \end{enumerate}

  实验结果表明，本工作的优化让 IoTDB 的 \emph{InsertRecords} 写入机制在压测场景下吞吐提升了 116\%、延迟降低了 75\% 的同时节约了 11\% 的磁盘资源和 95\% 的网络带宽资源，证明经过优化以后 InsertRecords 写入机制效率得到了提升。
  \thusetup{
    keywords = {工业物联网, 时序数据库, 性能分析, 写入性能优化},
  }
\end{abstract}

\begin{abstract*}
  % Use comma as separator when inputting

  In recent years, the rapid development of the Industrial Internet of Things has generated a growing amount of time-series data. How to efficiently write and store these time-series data has become an important issue. Apache IoTDB is a time-series database designed for IoT scenarios, which currently supports writing using SQL, as well as writing by Tablet (\emph{InsertTablets}) and by Records (\emph{InsertRecords}). Among them, the \emph{InsertRecords} interface offers good usability, writing performance, and the widest applicability across different scenarios, making it popular among a large number of users.

  Faced with the increasing write load in the Industrial Internet of Things scenarios, optimizing the \emph{InsertRecords} write performance can not only raise the upper limit of IoTDB to meet the write demands of higher load scenarios but also consume fewer resources in the same write scenarios, helping users save costs. This optimization holds significant practical importance. This work analyzes the existing IoTDB's \emph{InsertRecords} write mechanism and optimizes it from three aspects: client, RPC layer, and storage engine, thereby improving the performance of the \emph{InsertRecords} write mechanism. The main contributions of this work are as follows:
  
  \begin{enumerate}
  \item We comprehensively analyzed the execution flow of the existing IoTDB \emph{InsertRecords} write mechanism and quantified the performance overhead of each link using a performance analysis tool under stress testing scenarios. We identified the bottlenecks of the existing \emph{InsertRecords} write mechanism, including network bandwidth bottlenecks, non-batch execution of the storage engine, and storage engine disk bottlenecks. Then, we analyzed the reasons for these bottlenecks from the design and implementation perspectives.
  \item We optimized the IoTDB's \emph{InsertRecords} write mechanism from three aspects: client, RPC layer, and storage engine. These optimizations included client request format conversion, data preprocessing, column-based serialization of write requests, batch execution of the storage engine, and log compression before writing. These measures addressed the identified bottlenecks of the \emph{InsertRecords} write mechanism, thereby improving write performance.
  \item Using stress testing tools, we tested the performance improvements brought about by various optimization measures, verifying their effectiveness. To closely mimic real user scenarios, we designed and implemented a user load sampling and simulation program. By sampling the real loads of several users, we generated a series of simulated loads. Then, we tested the IoTDB's \emph{InsertRecords} write mechanism before and after optimization using these simulated loads.
  \end{enumerate}
  
  Experimental results showed that our optimizations increased the throughput of IoTDB's \emph{InsertRecords} write mechanism by 116\% and reduced latency by 75\% in stress testing scenarios. Additionally, it saved 11\% of disk resources and 95\% of network bandwidth resources, proving that the efficiency of IoTDB's \emph{InsertRecords} write mechanism had been improved after our optimizations.
  \thusetup{
    keywords* = {Industrial Internet of Things, Time-series Database, Performance Analysis, Writing Performance Optimization},
  }
\end{abstract*}
